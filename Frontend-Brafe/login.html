<!DOCTYPE html>
<html>
<head>
    <title>Brafé</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
    
    <header class="menu">
        <div class="container">
            <a class="menu-logo" href="index.html"><img src="img/brafe.png" alt="Brafé"></a>    
            <nav class="menu-nav">
                <ul>
                    <li><a href="login.html">Login</a></li>
                    <li><a href="cadastrar.html">Cadastrar</a></li>
                    <li><a href="#">Sobre</a></li>
                    <li><a href="#">Produtos</a></li>
                    <li><a href="#">Portfólio</a></li>
                    <li><a href="#">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="assine">
        <div class="container">
            <div class="assine-info">
                <h2>Login:</h2>
            </div>
            <form id="loginForm">
                <label for="username">Username:</label><br>
                <input type="text" id="username" name="username" placeholder="Digite seu username">
                <label for="password">Password:</label><br>
                <input type="password" id="password" name="password" placeholder="Digite seu password"><br><br>
                <button type="submit">Logar</button>
            </form>
            <div id="errorMessage" style="color: red; display: none;"></div>
                <script>
                    document.getElementById('loginForm').addEventListener('submit', async function(event) {
                        event.preventDefault();
                        const username = document.getElementById('username').value;
                        const password = document.getElementById('password').value;
            
                        try {
                            const response = await fetch('http://localhost:8080/login', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({ username, password })
                            });
            
                            if (response.status === 200) {
                                const data = await response.json();
                                // Salvar dados no sessionStorage
                                sessionStorage.setItem('userData', JSON.stringify(data));
                                window.location.href = 'produto.html';
                            } else {
                                alert('Login failed');
                            }
                        } catch (error) {
                            console.error('Error:', error);
                            alert('An error occurred');
                        }
                    });
                </script>
            </div>
        </div>
    </section>
    
    <section class="sobre">
        <h2>Uma Mistura de</h2>
        <div class="container">
            <div class="sobre-item">
                <img src="img/cafe-1.jpg">
                <h3>amor</h3>
            </div>
            <div class="sobre-item">
                <img src="img/cafe-2.jpg">
                <h3>perfeição</h3>
            </div>
        </div>
        <p>O café é uma bebida produzida a partir dos grãos torrados do fruto do cafeeiro. É servido tradicionalmente quente, mas também pode ser consumido gelado. Ele é um estimulante, por possuir cafeína — geralmente 80 a 140 mg para cada 207 ml dependendo do método de preparação.</p>
    </section>
    

	<section class="assine">
		<div class="container">
			<div class="assine-info">
				<h2>Assine Nossa Newsletter</h2>
				<p>promoções e eventos mensais</p>
			</div>
			<form>
				<label>E-mail</label>
				<input type="text" placeholder="Digite seu e-mail">
				<button type="submit">Enviar</button>
			</form>
		</div>
	</section>
	
	<footer class="footer">
		<div class="container">
			<p>Este é um projeto PIT. Matheus do Prado Marques da Costa. <br>RGM: 23867078. <br>Faculdade: Unifran.</p>
			<div class="footer-img">
				<img src="img/brafe.png" alt="Brafé">
			</div>
		</div>
	</footer>
	
</body>
</html>
